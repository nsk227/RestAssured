package com.reqres.tests;

import org.json.simple.JSONObject;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

import io.restassured.RestAssured;
import io.restassured.path.json.JsonPath;
import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;

public class postRequest {
	RequestSpecification httpRequest = null;
	Response response = null;

	@BeforeMethod
	public void InitializeRequestURL() {
		RestAssured.baseURI = "https://reqres.in";
		httpRequest = RestAssured.given();
	}
	@Test(priority=0)
	public void CreateUser() {
		System.out.println("======================================");
		System.out.println("CreateUser");
		System.out.println("======================================");
		JSONObject requestparams = new JSONObject();
		requestparams.put("name","morpheus");
		requestparams.put("job","leader");
		httpRequest.body(requestparams.toJSONString());
		response = httpRequest.post("/api/users");
		System.out.println("Resopnse Code = "+response.statusCode());
		System.out.println("Status Line = "+response.getStatusLine());
		System.out.println("Resopnse Body = "+response.body().asString());
		JsonPath js =response.jsonPath();
		System.out.println("name = "+js.get("name"));//name=null
		System.out.println("id = "+js.get("id"));
		System.out.println("job = "+js.get("job"));//job=null
		System.out.println("createdAt = "+js.get("createdAt"));

	}

	@Test(priority=1)
	public void UpdateUser() {
		System.out.println("======================================");
		System.out.println("UpdateUser");
		System.out.println("======================================");
		int id =2;
		JSONObject requestparams = new JSONObject();
		requestparams.put("name","morpheus");
		requestparams.put("job","zion resident");
		httpRequest.body(requestparams.toJSONString());
		response = httpRequest.put("/api/users/"+ id);
		System.out.println("Resopnse Code = "+response.statusCode());
		System.out.println("Status Line = "+response.getStatusLine());
		System.out.println("Resopnse Body = "+response.body().asString());
		JsonPath js =response.jsonPath();
		System.out.println("name = "+js.get("name"));//name=null
		System.out.println("id = "+js.get("id"));
		System.out.println("job = "+js.get("job"));//job=null
		System.out.println("createdAt = "+js.get("createdAt"));
	}

	@Test(priority=2)
	public void RegisterSuccess() {
		System.out.println("======================================");
		System.out.println("Register Success");
		System.out.println("======================================");
		int id =2;
		JSONObject requestparams = new JSONObject();
		requestparams.put("email","eve.holt@reqres.in");
		requestparams.put("password","pistol");
		httpRequest.body(requestparams.toJSONString());
		response = httpRequest.post("/api/register");
		System.out.println("Resopnse Code = "+response.statusCode());
		System.out.println("Status Line = "+response.getStatusLine());
		System.out.println("Resopnse Body = "+response.body().asString());
		JsonPath js =response.jsonPath();
		System.out.println("id = "+js.get("id"));
		System.out.println("email= "+js.get("email"));//job=null
		System.out.println("password = "+js.get("password"));//job=null
		System.out.println("createdAt = "+js.get("createdAt"));
		
	}
}

